--- SOLUCIÓN TALLER 

--2. Crear 3 espacios de tabla (0.2):
--a. primero con 1 Gb y 3 archivos de datos, el espacio de tablas debe ser llamado "gofar_travel"

CREATE TABLESPACE GOFAR_TRAVEL DATAFILE
'C:\Oracle11g\database\archive\gofar_travel.dbf' SIZE 500M, 
'C:\Oracle11g\database\archive\gofar_trave2.dbf' SIZE 300M,
'C:\Oracle11g\database\archive\gofar_trave3.dbf' SIZE 200M
AUTOEXTEND ON NEXT 500M MAXSIZE 1G
EXTENT MANAGEMENT LOCAL
SEGMENT SPACE MANAGEMENT AUTO
ONLINE;

--b. el segundo con 500 Mb y 1 archivo de datos, llamado "test_purposes". 

CREATE TABLESPACE TEST_PURPOSES DATAFILE
'C:\OracleGreisonPemberty\product\12.2.0\dbhome_2\oradata\sample\test_purposes.dbf' SIZE 500M 
AUTOEXTEND ON NEXT 100M MAXSIZE 500M
EXTENT MANAGEMENT LOCAL
SEGMENT SPACE MANAGEMENT AUTO
ONLINE;                                          

--c. Undo TABLESPACE con 5Mb de espacio y 1 archivo de datos
CREATE UNDO TABLESPACE UNDOTBS DATAFILE
'C:\OracleGreisonPemberty\product\12.2.0\dbhome_2\oradata\sample\undotbs.dbf' SIZE 5M ;


--3. Establezca el  undo tablespace que se va a utilizar en el system
ALTER TABLESPACE UNDOTBS DATAFILE ONLINE;


--4. Crear un usuario de DBA y asignarlo al espacio de tablas llamado "gofar_travel", este usuario tiene espacio ilimitado
en el espacio de tablas 

ALTER SESSION SET "_ORACLE_SCRIPT"=true;
Drop user greison cascade;
Select * from all_users;

CREATE USER greison
IDENTIFIED BY elporte1985 
DEFAULT TABLESPACE gofar_travel
QUOTA  UNLIMITED ON gofar_travel;


--5. Asigne el rol de DBA y los permisos para conectarse al usuario que acaba de crear.

--5.1. Asigne el rol de DBA
GRANT DBA TO GREISON; 

--5.2. Permisos para conectarse 
GRANT CONNECT TO GREISON;

--6. Cree 3 perfiles:

select *  from   dba_profiles;
--a. Perfil 1: "Manager": Tiempo de una sesión por usuario, 40 días de duración de la contraseña, 15 mins inactivo, 4 intentos fallidos para inicio de sesión.

CREATE PROFILE MANAGER LIMIT
SESSIONS_PER_USER 1
CONNECT_TIME 15
PASSWORD_LIFE_TIME 40  
FAILED_LOGIN_ATTEMPTS 4;


--b. Perfil 2: "finance": Tiempo de una sesión por usuario, 15 días de duración de la contraseña, 3 mins inactivo, 2 intentos fallidos para inicio de sesión.

CREATE PROFILE FINANCE LIMIT
SESSIONS_PER_USER 1
CONNECT_TIME 3
PASSWORD_LIFE_TIME 15
FAILED_LOGIN_ATTEMPTS 2;


--c. Perfil 2: "development": Tiempo de dos sesión por usuario, 100 días de duración de la contraseña, 30 mins inactivo, 0 intentos fallidos para inicio de sesión.

CREATE PROFILE DEVELOPMENT LIMIT
SESSIONS_PER_USER 2
CONNECT_TIME 30
PASSWORD_LIFE_TIME 100;

--7. Crear 4 usuarios, asignarles el espacio de tablas "gofar_travel"; perfiles creados deben ser utilizados para usuarios, todos los usuarios deben permitir conectarse a la base de datos.

CREATE USER BIBIANA
IDENTIFIED BY bibi2017
DEFAULT TABLESPACE gofar_travel
QUOTA UNLIMITED ON gofar_travel
PROFILE MANAGER;
GRANT CONNECT TO BIBIANA;


CREATE USER CESAR
IDENTIFIED BY cesar2017
DEFAULT TABLESPACE gofar_travel
QUOTA UNLIMITED ON gofar_travel
PROFILE DEVELOPMENT;
GRANT CONNECT TO CESAR;

CREATE USER CONSULTA
IDENTIFIED BY consulta2017
DEFAULT TABLESPACE gofar_travel
QUOTA UNLIMITED ON gofar_travel
PROFILE FINANCE;
GRANT CONNECT TO CONSULTA;

CREATE USER ANDRES
IDENTIFIED BY andres2017
DEFAULT TABLESPACE gofar_travel
QUOTA UNLIMITED ON gofar_travel
PROFILE DEVELOPMENT;
GRANT CONNECT TO ANDRES;

--8. Bloquear los usuarios asociados con los perfiles: manager y finance.

ALTER USER BIBIANA ACCOUNT LOCK;
ALTER USER CONSULTA ACCOUNT LOCK;

--8.1. Desbloquear 
ALTER USER BIBIANA ACCOUNT UNLOCK;
ALTER USER CONSULTA ACCOUNT UNLOCK;

--9. Elimine el espacio de tablas denominado "test_purposes" 

DROP TABLESPACE TEST_PURPOSES INCLUDING CONTENTS;
